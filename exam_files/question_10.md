# שאלה 10

## שאלון 97104, קיץ תשפ"ד – 2024 – מועד א'

## שאלה 10 (15 נקודות)

נתונה הפעולה why המקבלת מערך של מספרים שלמים arr ומספר שלם חיובי s. הפעולה משתמשת בפעולת עזר what.

```java
public static void why(int[] arr, int s) {
    s = s % arr.length;
    what(arr, 0, arr.length - 1);
    what(arr, 0, s - 1);
    what(arr, s, arr.length - 1);
}

public static void what(int[] arr, int start, int end) {
    int temp;
    while (start < end) {
        temp = arr[start];
        arr[start] = arr[end];
        arr[end] = temp;
        start++;
        end--;
    }
}
```

נתון מערך arr הבא:

| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
|---|---|---|---|---|---|---|---|---|---|
| 5 | 7 | 12 | 15 | 21 | 26 | 40 | 51 | 71 | 84 |

### א. (5 נק')
מה יהיה תוכן הרשימה אחרי זימון הפעולה what(arr, 2, 6)?
יש להראות מעקב אחרי ביצוע הפעולה.

### ב. (2 נק')
מה מבצעת הפעולה what באופן כללי?
בתשובה יש להתייחס לכל הפרמטרים של הפעולה.

### ג. (4 נק')
מה יהיה תוכן הרשימה אחרי זימון הפעולה why(arr, 4)?
יש להראות מעקב אחרי ביצוע הפעולה why, אין צורך במעקב אחרי ביצוע הפעולה what.

### ד. (2 נק')
האם קיימים ערכים של פרמטר s שעבורם הרשימה arr לא השתנה אחרי ביצוע זימון הפעולה why(arr, s)?
הסבירו את תשובתכם.

### ה. (2 נק')
מה מבצעת הפעולה why באופן כללי?
בתשובה יש להתייחס לכל הפרמטרים של הפעולה.

## פתרון

### סעיף א (5 נקודות)

```
int[] arr = {5, 7, 12, 15, 21, 26, 40, 51, 71, 84};
what(arr, 2, 6)

temp = arr[2] = 12, arr[2] = arr[6] = 40, arr[6] = temp = 12
start = 3, end = 5

temp = arr[3] = 15, arr[3] = arr[5] = 26, arr[5] = temp = 15
start = 4, end = 4

end.

arr = {5, 7, 40, 26, 21, 15, 12, 51, 71, 84};
```

### סעיף ב (2 נקודות)

הפעולה הופכת את סדר האיברים ב-arr החל ממיקום start, ועד מיקום end.

### סעיף ג (4 נקודות)

```
why(arr, 4)
int[] arr = {5, 7, 12, 15, 21, 26, 40, 51, 71, 84}

s = 4 % 10 = 4
what(arr, 0, 9)  => arr = {84, 71, 51, 40, 26, 21, 15, 12, 7, 5}
what(arr, 0, 3)  => arr = {40, 51, 71, 84, 26, 21, 15, 12, 7, 5}
what(arr, 4, 9)  => arr = {40, 51, 71, 84, 5, 7, 12, 15, 21, 26}
```

### סעיף ד (2 נקודות)

כן, s = 0/10/20/30 - כל כפולה של 10.

כי אז s בשורה הראשונה יהיה 0. ואז בעצם יש הפעלה:
- what(arr, 0, 9) – היפוך מיקום איברי המערך
- what(arr, 0, -1) – לא ישנה כלום
- what(arr, 0, 9) – היפוך מיקום איברי המערך

כלומר המערך יתהפך ויוחזר אחר כך למצבו המקורי.

### סעיף ה (2 נקודות)

הפעולה עושה סיבוב מעגלי ימינה s פעמים!

---
## 📚 הסבר התרגיל – כיצד לפתור?

### מהי הבעיה?
שתי פעולות מניפולציה של מערך:  
- **what(arr, start, end)**: הופכת סדר האיברים בין start ל-end  
- **why(arr, s)**: מבצעת סיבוב מעגלי ימינה ב-s מקומות

### אלגוריתם:

**הבנת what - היפוך קטע:**
```java
public static void what(int[] arr, int start, int end) {
    int temp;
    while (start < end) {
        temp = arr[start];       // שמור ערך שמאלי
        arr[start] = arr[end];   // העתק ערך ימני לשמאל
        arr[end] = temp;         // העתק ערך ששמרנו לימין
        start++;
        end--;
    }
}
```

**דוגמה - what(arr, 2, 6):**
```
מערך התחלתי: {5, 7, 12, 15, 21, 26, 40, 51, 71, 84}
                        ↓   ↓   ↓   ↓   ↓
                       [12, 15, 21, 26, 40]  ← קטע להיפוך

שלב 1: החלף arr[2]=12 ↔ arr[6]=40 → {5,7,40,15,21,26,12,51,71,84}
שלב 2: החלף arr[3]=15 ↔ arr[5]=26 → {5,7,40,26,21,15,12,51,71,84}
שלב 3: start=4, end=4 → עצור (start < end כבר לא מתקיים)

תוצאה: {5, 7, 40, 26, 21, 15, 12, 51, 71, 84}
```

**מטרה:** הופכת את סדר האיברים בקטע [start...end]

**הבנת why - סיבוב מעגלי:**
```java
public static void why(int[] arr, int s) {
    s = s % arr.length;              // נרמול (למקרה s > length)
    what(arr, 0, arr.length - 1);    // היפוך כל המערך
    what(arr, 0, s - 1);             // היפוך s איברים ראשונים
    what(arr, s, arr.length - 1);    // היפוך שאר האיברים
}
```

**דוגמה - why(arr, 4):**
```
מערך התחלתי: {5, 7, 12, 15, 21, 26, 40, 51, 71, 84}
s = 4 % 10 = 4

שלב 1: what(arr, 0, 9) - היפוך כל המערך
→ {84, 71, 51, 40, 26, 21, 15, 12, 7, 5}

שלב 2: what(arr, 0, 3) - היפוך 4 ראשונים
→ {40, 51, 71, 84, 26, 21, 15, 12, 7, 5}

שלב 3: what(arr, 4, 9) - היפוך שאר האיברים
→ {40, 51, 71, 84, 5, 7, 12, 15, 21, 26}

תוצאה: סיבוב ימינה ב-4 מקומות! ✅
(4 האיברים האחרונים עברו להתחלה)
```

**למה זה עובד?**  
טריק מתמטי: סיבוב ימינה = היפוך כולל + היפוך שני חלקים

**סעיף ד - מתי המערך לא משתנה?**

כאשר `s % arr.length == 0`:  
- s=0: אין סיבוב
- s=10 (אורך המערך): סיבוב מלא = חזרה למקור
- s=20, 30, ...: כפולות של אורך המערך

**הוכחה:**
```
s = 0 → s % 10 = 0
שלב 1: what(arr, 0, 9) - היפוך כולל
שלב 2: what(arr, 0, -1) - לא עושה כלום (start > end)
שלב 3: what(arr, 0, 9) - היפוך כולל שוב
→ חזרה למקורי!
```

### 🎯 מה להקפיד:

✅ **הבנת what:**
- **לא** יוצרת מערך חדש - משנה את המקורי
- עובדת בזמן O(n) כאשר n = end - start
- אם start >= end: לא עושה כלום

✅ **הבנת why:**
- השורה `s = s % arr.length` חשובה! מטפלת ב-s גדול מאורך המערך
- 3 קריאות ל-what, כל אחת עם תפקיד שונה
- סיבוב **ימינה** (לא שמאלה!)

✅ **טעויות נפוצות בסעיף א:**
- אי-הבנה שצריך להראות **כל שלב** של החלפות
- שכחת העדכון של start++ ו-end-- בכל איטרציה
- המשך הלולאה גם כש-start==end

✅ **טעויות נפוצות בסעיף ג:**
- ניסיון לעקוב **בתוך** what במקום לראות רק תוצאה סופית
- שכחת המודולו: s=4 נשאר 4 (לא 14 או ערך אחר)
- אי-הבנת הסדר: היפוך כולל **לפני** היפוך החלקים

✅ **טעויות נפוצות בסעיף ד:**
- תשובה "s=0 בלבד" → **שגוי**! גם s=10,20,30...
- אי-הסבר למה: צריך להראות שהמערך מתהפך ואז חוזר
- תשובה "אף ערך" → שגוי

✅ **דוגמאות בדיקה:**
- `what({1,2,3,4,5}, 1, 3)` → `{1,4,3,2,5}` (היפוך 2,3,4)
- `what({1,2,3}, 0, 0)` → `{1,2,3}` (אין שינוי)
- `why({1,2,3,4,5}, 2)` → `{4,5,1,2,3}` (2 אחרונים להתחלה)
- `why({1,2,3}, 3)` → `{1,2,3}` (סיבוב מלא)
- `why({1,2,3}, 7)` → `{2,3,1}` (7%3=1 → סיבוב ב-1)

**טריק לזכור:** סיבוב ימינה ב-k = העברת k איברים **אחרונים** להתחלה.

---