# שאלה 5

## שאלון 97104, קיץ תשפ"ד – 2024 – מועד א'

## שאלה 5 (12 נקודות)

מערך של מספרים שלמים חיוביים נקרא מערך "מושלם K" אם הוא עונה על התנאי הבא:
הסכום של כל K האיברים ההתחלתיים במערך (האיברים אשר נמצאים במקומות 0, 1, 2, ..., K-1) מתחלק ב-K ללא שארית.

לדוגמה:
המערך הבא הוא מערך "מושלם 5":

| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
|---|---|---|---|---|---|---|---|---|
| 7 | 1 | 4 | 1 | 2 | 3 | 2 | 1 | 3 |

כי סכום של חמשת האיברים הראשונים 7+1+4+1+2=15 מתחלק ב-5.

### א. (5 נק')
כתבו פעולה המקבלת מערך של מספרים שלמים חיוביים arr ומספר שלם חיובי K.
הפעולה תחזיר ערך true, אם המערך "מושלם K," ולא, הפעולה תחזיר ערך false.

כותרת הפעולה:
```java
public static boolean isPerfectK(int[] arr, int k)
```

מערך של מספרים שלמים חיוביים נקרא מערך "סופר מושלם" אם הוא מערך מושלם K עבור כל ערך של K מ-1 עד לאורך המערך.

לדוגמה:
המערך הנתון:

| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
|---|---|---|---|---|---|---|---|---|
| 7 | 1 | 4 | 1 | 2 | 3 | 2 | 1 | 3 |

הוא לא מערך "סופר מושלם" כי הוא לא מערך "מושלם 4".

### ב. (5 נק')
כתבו פעולה המקבלת מערך של מספרים שלמים חיוביים arr. הפעולה תחזיר ערך true, אם המערך "סופר מושלם", ולא, הפעולה תחזיר ערך false.

כותרת הפעולה:
```java
public static boolean isSuperPerfect(int[] arr)
```

### ג. (2 נק')
מהי סיבוכיות הפעולות שכתבתם בסעיפים א' ו-ב'. הסבירו את תשובתכם.

## פתרון

### סעיף א (5 נקודות)

```java
public static boolean isPerfectK(int[] arr, int k) {
    if (arr.length < k)
        return false;
        
    int sumFive = 0;
    for (int i = 0; i < k; i++)
        sumFive += arr[i];
        
    return ((sumFive % k) == 0);
}
```

### סעיף ב (5 נקודות)

```java
public static boolean isSuperPerfect(int[] arr) {
    boolean flag = true;
    for (int i = 1; i < arr.length; i++)
        if (flag)
            flag = isPerfectK(arr, i);
    return flag;
}
```

**פתרון חלופי:**

```java
public static boolean isSuperPerfect(int[] arr) {
    for (int i = 1; i < arr.length; i++)
        if (!isPerfectK(arr, i))
            return false;
    return true;
}
```

### סעיף ג (2 נקודות)

סיבוכיות סעיף א: O(n) כאשר n - מספר האיברים במערך, אפשר גם O(k)

סיבוכיות סעיף ב: O(n²) כאשר n - מספר האיברים במערך.

---
## 📚 הסבר התרגיל – כיצד לפתור?

### מהי הבעיה?
מערך "מושלם K" = סכום K האיברים הראשונים מתחלק ב-K ללא שארית.  
מערך "סופר מושלם" = מושלם K עבור **כל** ערך של K מ-1 עד אורך המערך.

### אלגוריתם:

**סעיף א - isPerfectK:**
1. בדוק אם אורך המערך קטן מ-K → `if (arr.length < k) return false`
2. אתחל `sumFive = 0`
3. חשב סכום K האיברים הראשונים:
   ```java
   for (int i = 0; i < k; i++)
       sumFive += arr[i];
   ```
4. בדוק אם הסכום מתחלק ב-K: `return (sumFive % k == 0)`

**דוגמה:** `arr = {7,1,4,1,2,3,2,1,3}`, `k=5`
- סכום: 7+1+4+1+2 = 15
- 15 % 5 = 0 ✅ → מערך מושלם 5

**סעיף ב - isSuperPerfect:**
1. עבור על כל ערך אפשרי של K: `for (int i = 1; i < arr.length; i++)`
2. לכל K, בדוק אם המערך מושלם K באמצעות `isPerfectK(arr, i)`
3. אם נמצא K שהמערך לא מושלם עבורו → `return false`
4. אם כל הערכים עברו → `return true`

**דוגמה לבדיקה:**
- `arr = {7,1,4,1,2,3,2,1,3}`
- K=1: סכום=7, 7%1=0 ✅
- K=2: סכום=8, 8%2=0 ✅
- K=3: סכום=12, 12%3=0 ✅
- K=4: סכום=13, 13%4=1 ❌ → לא סופר מושלם!

**סעיף ג - סיבוכיות:**
- isPerfectK: O(k) או O(n) - לולאה אחת עד K
- isSuperPerfect: O(n²) - לולאה חיצונית n פעמים, כל פעם קוראת ל-isPerfectK שרצה עד n

### 🎯 מה להקפיד:

✅ **תנאים קצה:**
- `arr.length < k` → צריך לבדוק **לפני** הלולאה, אחרת ArrayIndexOutOfBounds!
- מערך באורך 1: תמיד סופר מושלם (K=0 לא נבדק, רק מ-K=1)
- מערך ריק: מערך באורך 0 - טכנית סופר מושלם (אין ערכי K לבדוק)

✅ **טעויות נפוצות:**
- שכחת בדיקת `arr.length < k` בסעיף א → קריסה!
- התחלת הלולאה מ-`i=0` בסעיף ב → שגוי, צריך להתחיל מ-K=1
- חישוב הסכום מחדש בכל פעם במקום שימוש בפעולת עזר
- סיבוכיות: לא הבנה שיש לולאה כפולה (isSuperPerfect קורא n פעמים ל-isPerfectK)

✅ **פתרון אופטימלי בסעיף ב:**
שני גרסאות שקולות:
```java
// גרסה 1: עם דגל
boolean flag = true;
for (int i = 1; i < arr.length; i++)
    if (flag)
        flag = isPerfectK(arr, i);
return flag;

// גרסה 2: יציאה מוקדמת (עדיפה!)
for (int i = 1; i < arr.length; i++)
    if (!isPerfectK(arr, i))
        return false;
return true;
```

✅ **דוגמאות בדיקה:**
- `{6}` עם K=1: סכום=6, 6%1=0 → מושלם 1 → סופר מושלם ✅
- `{2,4}` עם K=1: 2%1=0 ✅, K=2: (2+4)%2=0 ✅ → סופר מושלם
- `{2,3}` עם K=2: 5%2=1 ❌ → לא סופר מושלם

---