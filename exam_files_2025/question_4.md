# שאלה 4

## שאלון 97104, קיץ תשפ"ה – 2025 – מועד א'

## שאלה 4 (12 נקודות)

במפעל יש שני סוגים של עובדים: פועלים ומהנדסים. שכרו של כל עובד מחושב כך:
• עבור כל אחת מ-160 שעות העבודה הראשונות פועל מקבל 80 ₪ ומהנדס – 150 ₪.
• עבור כל שעה נוספת מקבל העובד תוספת של 70 ₪.

נתונה מחלקה:

```java
class Employee {
    private String id;      // ת.ז. של עובד
    private int status;     // 1 - מהנדס, 2 - פועל
    private int hours;      // מספר שעות עבודה בחודש
    
    public Employee(String id, int st) {  // פעולה בונה
        this.id = id;
        this.status = st;
        this.hours = 0;
    }
}
```

במחלקה הוגדרו כל הפעולות set ו-get וגם הפעולה toString().

### א. (3 נק')
כתבו במחלקה Employee פעולה getSalary() לחישוב המשכורת החודשית של עובד.

כותרת הפעולה:
```java
public int getSalary()
```

### ב. (3 נק')
לפניכם קטע תוכנית לקליטת נתוני שכר של עובד מסוים. עבור כל אחד מ-25 ימי העבודה בחודש ייקלטו שעת תחילת העבודה ושעת סיום העבודה. אחרי קליטת הנתונים, הקטע ידפיס את השכר של העובד.

השלימו את החסר:

```java
Scanner in = new Scanner(System.in);
int s = 0;
String n = __________(1)____________;
int t = __________(2)____________;

Employee emp = __________(3)____;
for (int i = 1; i < 25; i++) {
    int a = in.nextInt();
    int b = in.nextInt();
    s = __________(4)___;
}
emp.setHours(____(5)__);
System.out.println(________(6)______);
```

### ג. (6 נק')
כתבו פעולה אשר מקבלת את מערך נתוני השכר של כל עובדי המפעל. על הפעולה להדפיס את מספרי הזהות של הפועלים אשר משכורתם גבוהה מממוצע המשכורות של המהנדסים.

## פתרון

### סעיף א (3 נקודות)

```java
public int getSalary() {
    int baseHours = Math.min(160, this.hours);
    int extraHours = Math.max(0, this.hours - 160);
    int baseRate = (this.status == 2) ? 80 : 150;
    return (baseHours * baseRate) + (extraHours * 70);
}
```

### סעיף ב (3 נקודות)

```java
Scanner in = new Scanner(System.in);
int s = 0;
String n = in.next();                       // (1) קלט של מספר זהות
int t = in.nextInt();                       // (2) קלט של סטטוס

Employee emp = new Employee(n, t);          // (3) יצירת אובייקט מסוג Employee

for (int i = 1; i <= 25; i++) {
    int a = in.nextInt();
    int b = in.nextInt();
    s = s + (b - a);                        // (4) צבירת שעות עבודה ליום
}

emp.setHours(s);                            // (5) עדכון סך השעות באובייקט
System.out.println(emp.getSalary());        // (6) הדפסת השכר
```

### סעיף ג (6 נקודות)

```java
public static void printWorkersAboveEngineerAvg(Employee[] employees) {
    int sum = 0;
    int count = 0;
    
    // חישוב ממוצע משכורות של מהנדסים (status == 1)
    for (Employee emp : employees) {
        if (emp.getStatus() == 1) {
            sum += emp.getSalary();
            count++;
        }
    }
    
    int avgEngineer = sum / count;
    
    // הדפסת פועלים (status == 2) שמשכורתם גבוהה מהממוצע
    for (Employee emp : employees) {
        if (emp.getStatus() == 2 && emp.getSalary() > avgEngineer) {
            System.out.println(emp.getId());
        }
    }
}
```

---

## 📚 הסבר התרגיל – כיצד לפתור?

### מהי הבעיה?
חישוב שכר עובדים בשתי קטגוריות (פועלים ומהנדסים) עם שיעורי שכר שונים והשוואת משכורות.

### שלבי פתרון:

**סעיף א - חישוב שכר:**
1. חשב שעות רגילות: min(160, hours)
2. חשב שעות נוספות: max(0, hours - 160)
3. שכר בסיס: 80 לפועל, 150 למהנדס
4. כל שעה נוספת: 70 ₪
5. סכום כולל: (רגילות × שכר בסיס) + (נוספות × 70)

**סעיף ב - קליטת נתונים:**
1. קלוט שם זהות
2. קלוט סטטוס (1 = מהנדס, 2 = פועל)
3. צור אובייקט Employee
4. לכל יום: קלוט שעת התחלה וסיום, צבור את ההבדל
5. עדכן שעות בעצם
6. הדפס משכורת

**סעיף ג - השוואה:**
1. חשב ממוצע משכורות מהנדסים
2. עבור כל פועל: אם משכורתו > ממוצע מהנדסים → הדפס ת.ז.

### דגשים חשובים:
- שכר בסיס **שונה לפועל ולמהנדס**
- שעות נוספות **זהות לשניהם** (70 ₪)
- **160 שעות הן הגבול** בין שכר בסיס לשכר נוסף
- בסעיף ג': לחשב ממוצע עם חלוקה נכונה (מעברה ל-int)

### תנאי קצה:
- עובד עם 0 שעות: שכר = 0
- עובד עם בדיוק 160 שעות: שכר = 160 × שכר בסיס
- עובד עם 200 שעות: שכר = 160 × בסיס + 40 × 70

### טעויות נפוצות:
1. **שכחה שהשכר שונה לפועל ולמהנדס** - הגדר את השכר בנכון
2. **חישוב שעות כלוקות** - זה דורש Math.min/max או תנאי if
3. **בחלק ב'**: `i < 25` במקום `i <= 25` - יקלוט רק 24 ימים
4. **בחלק ג'**: לא לבדוק status נכון - השווה עם הערך הנכון

### דוגמה בדיקה:
- פועל עם 160 שעות: 160 × 80 = 12,800 ₪
- מהנדס עם 160 שעות: 160 × 150 = 24,000 ₪
- פועל עם 200 שעות: 160 × 80 + 40 × 70 = 12,800 + 2,800 = 15,600 ₪

### סיכום:
התרגיל בודק הבנה של:
- חישובים מותנים (שכר בסיס vs נוסף)
- עבודה עם עצמים ומערכים
- חישוב ממוצעים והשוואות
    // חישוב ממוצע משכורות המהנדסים
    for (int i = 0; i < employees.length; i++) {
        if (employees[i].getStatus() == 1) {
            sum += employees[i].getSalary();
            count++;
        }
    }
    
    if (count == 0) {
        System.out.println("nothing to compare");
        return;
    }
    
    double avg = (double) sum / count;
    
    // הדפסת פועלים עם שכר גבוה מהממוצע
    System.out.println("high salary workers:");
    for (int i = 0; i < employees.length; i++) {
        if (employees[i].getStatus() == 2 && employees[i].getSalary() > avg) {
            System.out.println(employees[i].getId());
        }
    }
}
```

---
## 📚 הסבר התרגיל – כיצד לפתור?

### מהי הבעיה?
**חישוב משכורת** עובדים (פועלים ומהנדסים) על פי:
- **160 שעות ראשונות:**
  - פועל (status=2): 80 ₪ לשעה
  - מהנדס (status=1): 150 ₪ לשעה
- **שעות נוספות:** 70 ₪ לשעה (לשניהם)

### אלגוריתם:

**getSalary():**
```java
public int getSalary() {
    int baseHours = Math.min(160, this.hours);  // עד 160
    int extraHours = Math.max(0, this.hours - 160);  // יתרה
    int baseRate = (this.status == 2) ? 80 : 150;  // שכר בסיסי
    return (baseHours * baseRate) + (extraHours * 70);
}
```

**לוגיקה:**
1. בדוק כמה שעות הן ב-160 ראשונות (יכול להיות פחות)
2. בדוק כמה שעות נוספות (סך כל - 160, או 0 אם פחות)
3. קבע שכר בסיסי לפי סטטוס
4. חשב: (שעות בסיס × שכר בסיס) + (שעות נוספות × 70)

**דוגמה:**
- פועל (status=2), 200 שעות:
  - בסיס: min(200, 160) = 160
  - נוספות: max(0, 200-160) = 40
  - משכורת: (160 × 80) + (40 × 70) = 12,800 + 2,800 = **15,600**

### 🎯 מה להקפיד:

✅ **תנאים קצה:**
- שעות < 160: אין נוספות → עד 160 בלבד
- שעות = 160 בדיוק: אין נוספות
- שעות > 160: יש נוספות
- status != 1 ו != 2: שגיאה בלוגיקה

✅ **טעויות נפוצות:**
1. **שימוש ב-`if` במקום `Math.min/max`** → קל לטעות
2. **חישוב שגוי של נוספות:** `hours - 160` לא `160 - hours`
3. **ternary operator:** `status == 2` → 80, אחרת → 150 ✓
4. **חישוב בשגיאה:** `baseRate * baseHours` + `70 * extraHours`
5. **בדוק: מהנדס שכר = 150, לא 80!**

✅ **דוגמאות בדיקה:**
```
فועל, 100 שעות:   (100 × 80) + (0 × 70) = 8,000
מהנדס, 100 שעות: (100 × 150) + (0 × 70) = 15,000
פועל, 200 שעות:  (160 × 80) + (40 × 70) = 15,600
מהנדס, 200 שעות: (160 × 150) + (40 × 70) = 27,800
```

---